{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/enzod/integrador-07_07/Integrador_reservas/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../../firebase.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = () => [\"18:45\", \"19:00\", \"20:00\", \"21:00\", \"21:50\"];\nfunction ReservasPage_div_6_ion_select_option_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const time_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", time_r3);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", time_r3, \" \");\n  }\n}\nfunction ReservasPage_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"form\", 4);\n    i0.ɵɵlistener(\"submit\", function ReservasPage_div_6_Template_form_submit_1_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.submitReserva());\n    });\n    i0.ɵɵelementStart(2, \"ion-list\", 5)(3, \"ion-item\")(4, \"ion-label\", 6);\n    i0.ɵɵtext(5, \"Nome\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ion-input\", 7);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ReservasPage_div_6_Template_ion_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.reserva.nome, $event) || (ctx_r1.reserva.nome = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"ion-item\")(8, \"ion-label\", 6);\n    i0.ɵɵtext(9, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"ion-input\", 8);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ReservasPage_div_6_Template_ion_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.reserva.email, $event) || (ctx_r1.reserva.email = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"ion-item\")(12, \"ion-label\", 6);\n    i0.ɵɵtext(13, \"N\\u00FAmero de Pessoas\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"ion-select\", 9);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ReservasPage_div_6_Template_ion_select_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.reserva.numeroPessoas, $event) || (ctx_r1.reserva.numeroPessoas = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(15, \"ion-select-option\", 10);\n    i0.ɵɵtext(16, \"1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"ion-select-option\", 11);\n    i0.ɵɵtext(18, \"2\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"ion-select-option\", 12);\n    i0.ɵɵtext(20, \"3\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"ion-select-option\", 13);\n    i0.ɵɵtext(22, \"4\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"ion-select-option\", 14);\n    i0.ɵɵtext(24, \"5\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"ion-select-option\", 15);\n    i0.ɵɵtext(26, \"6\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(27, \"ion-item\")(28, \"ion-label\", 6);\n    i0.ɵɵtext(29, \"Tipo de Mesa\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"ion-select\", 16);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ReservasPage_div_6_Template_ion_select_ngModelChange_30_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.reserva.tipoMesa, $event) || (ctx_r1.reserva.tipoMesa = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(31, \"ion-select-option\", 17);\n    i0.ɵɵtext(32, \"\\u00C0 La Carte\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"ion-select-option\", 18);\n    i0.ɵɵtext(34, \"Rod\\u00EDzio\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(35, \"ion-item\")(36, \"ion-label\", 6);\n    i0.ɵɵtext(37, \"Data da Reserva\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"ion-datetime\", 19);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ReservasPage_div_6_Template_ion_datetime_ngModelChange_38_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.reserva.data, $event) || (ctx_r1.reserva.data = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(39, \"ion-item\")(40, \"ion-label\", 6);\n    i0.ɵɵtext(41, \"Hor\\u00E1rio Preferencial\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"ion-select\", 20);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function ReservasPage_div_6_Template_ion_select_ngModelChange_42_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.reserva.horario, $event) || (ctx_r1.reserva.horario = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵtemplate(43, ReservasPage_div_6_ion_select_option_43_Template, 2, 2, \"ion-select-option\", 21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(44, \"ion-button\", 22);\n    i0.ɵɵtext(45, \" Reservar \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.reserva.nome);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.reserva.email);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.reserva.numeroPessoas);\n    i0.ɵɵadvance(16);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.reserva.tipoMesa);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.reserva.data);\n    i0.ɵɵproperty(\"min\", ctx_r1.currentDate);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.reserva.horario);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(8, _c0));\n  }\n}\nfunction ReservasPage_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\");\n    i0.ɵɵtext(2, \"Reserva realizada com sucesso!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class ReservasPage {\n  constructor(navCtrl, firebaseService, toastController) {\n    this.navCtrl = navCtrl;\n    this.firebaseService = firebaseService;\n    this.toastController = toastController;\n    this.reserva = {\n      nome: '',\n      email: '',\n      numeroPessoas: '',\n      tipoMesa: '',\n      data: '',\n      horario: ''\n    };\n    this.reservaRealizada = false; // Flag para controlar se a reserva foi realizada com sucesso\n    this.currentDate = new Date().toISOString(); // Inicializa com a data atual\n    this.limitesMesas$ = this.firebaseService.getLimiteMesas(); // Obtém os limites de mesas do Firebase\n  }\n  irParaLogin() {\n    this.navCtrl.navigateForward('/login');\n  }\n  submitReserva() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const disponivel = yield _this.firebaseService.verificarDisponibilidade(_this.reserva.tipoMesa).toPromise();\n        if (!disponivel) {\n          _this.mostrarToast('Não há mesas disponíveis para este tipo. Por favor, escolha outro tipo.');\n          return;\n        }\n        // Adicionar reserva ao Firebase\n        yield _this.firebaseService.addReserva({\n          nome: _this.reserva.nome,\n          email: _this.reserva.email,\n          numeroPessoas: _this.reserva.numeroPessoas,\n          tipoMesa: _this.reserva.tipoMesa,\n          data: _this.reserva.data,\n          horario: _this.reserva.horario\n        });\n        // Marcar que a reserva foi realizada com sucesso\n        _this.reservaRealizada = true;\n        // Mostrar mensagem de sucesso\n        _this.mostrarToast('Reserva realizada com sucesso!');\n        // Redirecionar para outra página ou fazer alguma ação após a reserva ser realizada\n        // this.navCtrl.navigateForward('/outra-pagina');\n      } catch (error) {\n        console.error('Erro ao adicionar reserva:', error);\n        _this.mostrarToast('Erro ao realizar a reserva. Por favor, tente novamente mais tarde.');\n      }\n    })();\n  }\n  mostrarToast(mensagem) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const toast = yield _this2.toastController.create({\n        message: mensagem,\n        duration: 3000,\n        // 3 segundos\n        position: 'bottom'\n      });\n      toast.present();\n    })();\n  }\n  static #_ = this.ɵfac = function ReservasPage_Factory(t) {\n    return new (t || ReservasPage)(i0.ɵɵdirectiveInject(i1.NavController), i0.ɵɵdirectiveInject(i2.FirebaseService), i0.ɵɵdirectiveInject(i1.ToastController));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ReservasPage,\n    selectors: [[\"app-reservas\"]],\n    decls: 8,\n    vars: 2,\n    consts: [[2, \"text-align\", \"center\"], [\"href\", \"/\", 2, \"text-decoration\", \"none\", \"color\", \"inherit\"], [\"fullscreen\", \"\", 1, \"ion-padding\"], [4, \"ngIf\"], [1, \"reservation-form\", 3, \"submit\"], [\"lines\", \"full\"], [\"position\", \"floating\"], [\"type\", \"text\", \"name\", \"nome\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"email\", \"name\", \"email\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"interface\", \"popover\", \"placeholder\", \"Selecione\", \"name\", \"numeroPessoas\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"value\", \"3\"], [\"value\", \"4\"], [\"value\", \"5\"], [\"value\", \"6\"], [\"interface\", \"popover\", \"placeholder\", \"Selecione\", \"name\", \"tipoMesa\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"\\u00C0 La Carte\"], [\"value\", \"Rod\\u00EDzio\"], [\"presentation\", \"date\", \"display-format\", \"DD/MM/YYYY\", \"picker-format\", \"DD MMM YYYY\", \"name\", \"data\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\", \"min\"], [\"interface\", \"popover\", \"placeholder\", \"Selecione\", \"name\", \"horario\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", \"expand\", \"block\", \"color\", \"danger\", 1, \"submit-button\"], [3, \"value\"]],\n    template: function ReservasPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\", 0)(3, \"a\", 1);\n        i0.ɵɵtext(4, \" Restaurante \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(5, \"ion-content\", 2);\n        i0.ɵɵtemplate(6, ReservasPage_div_6_Template, 46, 9, \"div\", 3)(7, ReservasPage_div_7_Template, 3, 0, \"div\", 3);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", !ctx.reservaRealizada);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.reservaRealizada);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i1.IonButton, i1.IonContent, i1.IonDatetime, i1.IonHeader, i1.IonInput, i1.IonItem, i1.IonLabel, i1.IonList, i1.IonSelect, i1.IonSelectOption, i1.IonTitle, i1.IonToolbar, i1.SelectValueAccessor, i1.TextValueAccessor],\n    styles: [\".dark-background[_ngcontent-%COMP%] {\\n  --background: #000;\\n  color: #fff;\\n}\\n\\nion-header[_ngcontent-%COMP%] {\\n  --background: #ff0000;\\n}\\n\\n.submit-button[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n}\\n\\n#container[_ngcontent-%COMP%] {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  text-decoration: none;\\n}\\n\\nion-header[_ngcontent-%COMP%] {\\n  --background: #ff0000;\\n}\\n\\n\\n\\n.reservation-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column; \\n\\n  align-items: center; \\n\\n  width: 80%; \\n\\n  margin: auto; \\n\\n}\\n\\n.reservation-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%] {\\n  margin-bottom: 15px;\\n}\\n.reservation-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%] {\\n  margin-top: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdmlld3MvcmVzZXJ2YXMvcmVzZXJ2YXMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7RUFDQSxXQUFBO0FBQ0o7O0FBRUU7RUFDRSxxQkFBQTtBQUNKOztBQUVFO0VBQ0UsaUJBQUE7QUFDSjs7QUFDRTtFQUNFLGtCQUFBO0VBRUEsa0JBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFFBQUE7RUFDQSwyQkFBQTtBQUNKOztBQUVFO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0FBQ0o7O0FBRUU7RUFDRSxlQUFBO0VBQ0EsaUJBQUE7RUFFQSxjQUFBO0VBRUEsU0FBQTtBQURKOztBQUlFO0VBQ0UscUJBQUE7QUFESjs7QUFHRTtFQUNFLHFCQUFBO0FBQUo7O0FBRUEsa0JBQUE7QUFHQTtFQUNFLGFBQUE7RUFDQSxzQkFBQSxFQUFBLGdDQUFBO0VBQ0EsbUJBQUEsRUFBQSw4QkFBQTtFQUNBLFVBQUEsRUFBQSwyQkFBQTtFQUNBLFlBQUEsRUFBQSxxQ0FBQTtBQURGOztBQUtFO0VBQ0UsbUJBQUE7QUFGSjtBQUtFO0VBQ0UsZ0JBQUE7QUFISiIsInNvdXJjZXNDb250ZW50IjpbIi5kYXJrLWJhY2tncm91bmQge1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjMDAwO1xyXG4gICAgY29sb3I6ICNmZmY7XHJcbiAgfVxyXG4gIFxyXG4gIGlvbi1oZWFkZXIge1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjZmYwMDAwO1xyXG4gIH1cclxuICBcclxuICAuc3VibWl0LWJ1dHRvbiB7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICB9XHJcbiAgI2NvbnRhaW5lciB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgXHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgcmlnaHQ6IDA7XHJcbiAgICB0b3A6IDUwJTtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcclxuICB9XHJcbiAgXHJcbiAgI2NvbnRhaW5lciBzdHJvbmcge1xyXG4gICAgZm9udC1zaXplOiAyMHB4O1xyXG4gICAgbGluZS1oZWlnaHQ6IDI2cHg7XHJcbiAgfVxyXG4gIFxyXG4gICNjb250YWluZXIgcCB7XHJcbiAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICBsaW5lLWhlaWdodDogMjJweDtcclxuICBcclxuICAgIGNvbG9yOiAjOGM4YzhjO1xyXG4gIFxyXG4gICAgbWFyZ2luOiAwO1xyXG4gIH1cclxuICBcclxuICAjY29udGFpbmVyIGEge1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gIH1cclxuICBpb24taGVhZGVyIHtcclxuICAgIC0tYmFja2dyb3VuZDogI2ZmMDAwMDtcclxuICB9XHJcbi8qIEZvcm0gU3BlY2lmaWMgKi9cclxuXHJcblxyXG4ucmVzZXJ2YXRpb24tZm9ybSB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyAvKiBBcnJhbmdlIGVsZW1lbnRzIHZlcnRpY2FsbHkgKi9cclxuICBhbGlnbi1pdGVtczogY2VudGVyOyAgIC8qIENlbnRlciBpdGVtcyBob3Jpem9udGFsbHkgKi9cclxuICB3aWR0aDogODAlOyAgICAgICAgICAgLyogQWRqdXN0IHdpZHRoIGFzIG5lZWRlZCAqL1xyXG4gIG1hcmdpbjogYXV0bzsgICAgICAgICAvKiBDZW50ZXIgdGhlIGZvcm0gY29udGFpbmVyIGl0c2VsZiAqL1xyXG59XHJcblxyXG4ucmVzZXJ2YXRpb24tZm9ybSB7XHJcbiAgaW9uLWl0ZW0ge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxuICB9XHJcblxyXG4gIC5zdWJtaXQtYnV0dG9uIHtcclxuICAgIG1hcmdpbi10b3A6IDIwcHg7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","time_r3","ɵɵadvance","ɵɵtextInterpolate1","ɵɵlistener","ReservasPage_div_6_Template_form_submit_1_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","submitReserva","ɵɵtwoWayListener","ReservasPage_div_6_Template_ion_input_ngModelChange_6_listener","$event","ɵɵtwoWayBindingSet","reserva","nome","ReservasPage_div_6_Template_ion_input_ngModelChange_10_listener","email","ReservasPage_div_6_Template_ion_select_ngModelChange_14_listener","numeroPessoas","ReservasPage_div_6_Template_ion_select_ngModelChange_30_listener","tipoMesa","ReservasPage_div_6_Template_ion_datetime_ngModelChange_38_listener","data","ReservasPage_div_6_Template_ion_select_ngModelChange_42_listener","horario","ɵɵtemplate","ReservasPage_div_6_ion_select_option_43_Template","ɵɵtwoWayProperty","currentDate","ɵɵpureFunction0","_c0","ReservasPage","constructor","navCtrl","firebaseService","toastController","reservaRealizada","Date","toISOString","limitesMesas$","getLimiteMesas","irParaLogin","navigateForward","_this","_asyncToGenerator","disponivel","verificarDisponibilidade","toPromise","mostrarToast","addReserva","error","console","mensagem","_this2","toast","create","message","duration","position","present","_","ɵɵdirectiveInject","i1","NavController","i2","FirebaseService","ToastController","_2","selectors","decls","vars","consts","template","ReservasPage_Template","rf","ctx","ReservasPage_div_6_Template","ReservasPage_div_7_Template"],"sources":["C:\\Users\\enzod\\integrador-07_07\\Integrador_reservas\\src\\app\\views\\reservas\\reservas.page.ts","C:\\Users\\enzod\\integrador-07_07\\Integrador_reservas\\src\\app\\views\\reservas\\reservas.page.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { NavController, ToastController } from '@ionic/angular';\r\nimport { FirebaseService } from '../../firebase.service'; // Substitua pelo caminho correto do seu serviço Firebase\r\nimport { Observable } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-reservas',\r\n  templateUrl: './reservas.page.html',\r\n  styleUrls: ['./reservas.page.scss'],\r\n})\r\nexport class ReservasPage {\r\n\r\n  currentDate: string;\r\n  reserva = {\r\n    nome: '',\r\n    email: '',\r\n    numeroPessoas: '',\r\n    tipoMesa: '',\r\n    data: '',\r\n    horario: ''\r\n  };\r\n\r\n  limitesMesas$: Observable<any[]>;\r\n  reservaRealizada = false; // Flag para controlar se a reserva foi realizada com sucesso\r\n\r\n  constructor(\r\n    private navCtrl: NavController,\r\n    private firebaseService: FirebaseService,\r\n    private toastController: ToastController\r\n  ) {\r\n    this.currentDate = new Date().toISOString(); // Inicializa com a data atual\r\n    this.limitesMesas$ = this.firebaseService.getLimiteMesas(); // Obtém os limites de mesas do Firebase\r\n  }\r\n\r\n  irParaLogin() {\r\n    this.navCtrl.navigateForward('/login');\r\n  }\r\n\r\n  async submitReserva() {\r\n    try {\r\n      const disponivel = await this.firebaseService.verificarDisponibilidade(this.reserva.tipoMesa).toPromise();\r\n      if (!disponivel) {\r\n        this.mostrarToast('Não há mesas disponíveis para este tipo. Por favor, escolha outro tipo.');\r\n        return;\r\n      }\r\n\r\n      // Adicionar reserva ao Firebase\r\n      await this.firebaseService.addReserva({\r\n        nome: this.reserva.nome,\r\n        email: this.reserva.email,\r\n        numeroPessoas: this.reserva.numeroPessoas,\r\n        tipoMesa: this.reserva.tipoMesa,\r\n        data: this.reserva.data,\r\n        horario: this.reserva.horario\r\n      });\r\n\r\n      // Marcar que a reserva foi realizada com sucesso\r\n      this.reservaRealizada = true;\r\n\r\n      // Mostrar mensagem de sucesso\r\n      this.mostrarToast('Reserva realizada com sucesso!');\r\n      \r\n      // Redirecionar para outra página ou fazer alguma ação após a reserva ser realizada\r\n      // this.navCtrl.navigateForward('/outra-pagina');\r\n\r\n    } catch (error) {\r\n      console.error('Erro ao adicionar reserva:', error);\r\n      this.mostrarToast('Erro ao realizar a reserva. Por favor, tente novamente mais tarde.');\r\n    }\r\n  }\r\n\r\n  async mostrarToast(mensagem: string) {\r\n    const toast = await this.toastController.create({\r\n      message: mensagem,\r\n      duration: 3000, // 3 segundos\r\n      position: 'bottom'\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n}\r\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-title style=\"text-align: center;\">\r\n      <a href=\"/\" style=\"text-decoration: none; color: inherit;\">\r\n        Restaurante\r\n      </a>\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content fullscreen class=\"ion-padding\">\r\n  <div *ngIf=\"!reservaRealizada\"> <!-- Mostra apenas se a reserva ainda não foi realizada -->\r\n    <form (submit)=\"submitReserva()\" class=\"reservation-form\">\r\n      <ion-list lines=\"full\">\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Nome</ion-label>\r\n          <ion-input type=\"text\" [(ngModel)]=\"reserva.nome\" name=\"nome\" required></ion-input>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Email</ion-label>\r\n          <ion-input type=\"email\" [(ngModel)]=\"reserva.email\" name=\"email\" required></ion-input>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Número de Pessoas</ion-label>\r\n          <ion-select interface=\"popover\" placeholder=\"Selecione\" [(ngModel)]=\"reserva.numeroPessoas\" name=\"numeroPessoas\" required>\r\n            <ion-select-option value=\"1\">1</ion-select-option>\r\n            <ion-select-option value=\"2\">2</ion-select-option>\r\n            <ion-select-option value=\"3\">3</ion-select-option>\r\n            <ion-select-option value=\"4\">4</ion-select-option>\r\n            <ion-select-option value=\"5\">5</ion-select-option>\r\n            <ion-select-option value=\"6\">6</ion-select-option>\r\n          </ion-select>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Tipo de Mesa</ion-label>\r\n          <ion-select interface=\"popover\" placeholder=\"Selecione\" [(ngModel)]=\"reserva.tipoMesa\" name=\"tipoMesa\" required>\r\n            <ion-select-option value=\"À La Carte\">À La Carte</ion-select-option>\r\n            <ion-select-option value=\"Rodízio\">Rodízio</ion-select-option>\r\n          </ion-select>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Data da Reserva</ion-label>\r\n          <ion-datetime presentation=\"date\" display-format=\"DD/MM/YYYY\" picker-format=\"DD MMM YYYY\" [(ngModel)]=\"reserva.data\" name=\"data\" [min]=\"currentDate\" required></ion-datetime>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label position=\"floating\">Horário Preferencial</ion-label>\r\n          <ion-select interface=\"popover\" placeholder=\"Selecione\" [(ngModel)]=\"reserva.horario\" name=\"horario\" required>\r\n            <ion-select-option *ngFor=\"let time of ['18:45', '19:00', '20:00', '21:00', '21:50']\" [value]=\"time\">\r\n              {{ time }}\r\n            </ion-select-option>\r\n          </ion-select>\r\n        </ion-item>\r\n      </ion-list>\r\n\r\n      <ion-button type=\"submit\" expand=\"block\" class=\"submit-button\" color=\"danger\">\r\n        Reservar\r\n      </ion-button>\r\n    </form>\r\n  </div>\r\n\r\n  <div *ngIf=\"reservaRealizada\"> <!-- Mostra apenas se a reserva foi realizada -->\r\n    <h2>Reserva realizada com sucesso!</h2>\r\n    <!-- Aqui você pode adicionar mais informações ou ações -->\r\n  </div>\r\n</ion-content>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}