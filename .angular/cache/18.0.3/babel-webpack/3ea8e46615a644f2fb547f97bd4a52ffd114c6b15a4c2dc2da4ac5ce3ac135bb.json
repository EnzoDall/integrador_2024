{"ast":null,"code":"import { of } from 'rxjs';\nimport { map, catchError } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../firebase.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@ionic/angular\";\nfunction AdminPage_div_6_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 8);\n    i0.ɵɵlistener(\"click\", function AdminPage_div_6_ion_item_2_Template_ion_item_click_0_listener() {\n      const dia_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.selecionarDia(dia_r2));\n    });\n    i0.ɵɵelementStart(1, \"ion-button\", 9);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const dia_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(3, 1, dia_r2, \"dd/MM/yyyy\"), \" \");\n  }\n}\nfunction AdminPage_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"ion-list\");\n    i0.ɵɵtemplate(2, AdminPage_div_6_ion_item_2_Template, 4, 4, \"ion-item\", 7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.diasDisponiveis);\n  }\n}\nfunction AdminPage_div_7_ion_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 15);\n    i0.ɵɵlistener(\"click\", function AdminPage_div_7_ion_button_4_Template_ion_button_click_0_listener() {\n      const horario_r6 = i0.ɵɵrestoreView(_r5).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.toggleReservas(horario_r6));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const horario_r6 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", horario_r6, \" \");\n  }\n}\nfunction AdminPage_div_7_div_6_div_1_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\")(2, \"h2\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const reserva_r7 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(reserva_r7.nome);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Email: \", reserva_r7.email, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"N\\u00FAmero de Pessoas: \", reserva_r7.numeroPessoas, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Data: \", i0.ɵɵpipeBind2(10, 6, reserva_r7.data, \"dd/MM/yyyy\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Hor\\u00E1rio: \", reserva_r7.horario, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Tipo de Mesa: \", reserva_r7.tipoMesa, \"\");\n  }\n}\nfunction AdminPage_div_7_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, AdminPage_div_7_div_6_div_1_ion_item_1_Template, 15, 9, \"ion-item\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const horario_r8 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.reservasAgrupadas[ctx_r2.diaSelecionado][horario_r8]);\n  }\n}\nfunction AdminPage_div_7_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, AdminPage_div_7_div_6_div_1_Template, 2, 1, \"div\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const horario_r8 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isReservasVisiveis(horario_r8));\n  }\n}\nfunction AdminPage_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-button\", 10);\n    i0.ɵɵlistener(\"click\", function AdminPage_div_7_Template_ion_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.diaSelecionado = null);\n    });\n    i0.ɵɵtext(2, \"Voltar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 11);\n    i0.ɵɵtemplate(4, AdminPage_div_7_ion_button_4_Template, 2, 1, \"ion-button\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-list\", 13);\n    i0.ɵɵtemplate(6, AdminPage_div_7_div_6_Template, 2, 1, \"div\", 14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.horarios);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.horarios);\n  }\n}\nexport class AdminPage {\n  constructor(firebaseService) {\n    this.firebaseService = firebaseService;\n    this.diasDisponiveis = [];\n    this.horarios = ['18:30', '19:00', '19:30', '20:00', '20:30', '21:00', '21:30'];\n    this.reservasAgrupadas = {};\n    this.diaSelecionado = null;\n    this.horarioSelecionado = null;\n  }\n  ngOnInit() {\n    this.firebaseService.getReservas().pipe(map(actions => actions.map(a => {\n      const data = a.payload.doc.data();\n      const id = a.payload.doc.id;\n      return {\n        ...data,\n        id\n      }; // Corrigido para garantir que o id não seja sobrescrito\n    })), catchError(error => {\n      console.error('Erro ao carregar reservas: ', error);\n      return of([]); // Retorna um array vazio em caso de erro\n    })).subscribe(reservas => {\n      this.reservasAgrupadas = {};\n      this.diasDisponiveis = Array.from(new Set(reservas.map(reserva => reserva.data)));\n      this.diasDisponiveis.forEach(dia => {\n        this.reservasAgrupadas[dia] = this.horarios.reduce((acc, horario) => {\n          acc[horario] = reservas.filter(reserva => reserva.data === dia && reserva.horario === horario);\n          return acc;\n        }, {});\n      });\n    });\n  }\n  selecionarDia(dia) {\n    this.diaSelecionado = dia;\n    this.horarioSelecionado = null;\n  }\n  toggleReservas(horario) {\n    if (this.horarioSelecionado === horario) {\n      this.horarioSelecionado = null;\n    } else {\n      this.horarioSelecionado = horario;\n    }\n  }\n  isReservasVisiveis(horario) {\n    return this.horarioSelecionado === horario;\n  }\n  static #_ = this.ɵfac = function AdminPage_Factory(t) {\n    return new (t || AdminPage)(i0.ɵɵdirectiveInject(i1.FirebaseService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AdminPage,\n    selectors: [[\"app-admin\"]],\n    decls: 8,\n    vars: 2,\n    consts: [[\"color\", \"red\"], [2, \"text-align\", \"center\"], [\"href\", \"/\", 2, \"text-decoration\", \"none\", \"color\", \"inherit\"], [\"fullscreen\", \"\", 1, \"ion-padding\"], [\"class\", \"dias-container\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"dias-container\"], [\"class\", \"dia-item\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"dia-item\", 3, \"click\"], [\"fill\", \"solid\", \"expand\", \"block\", \"color\", \"danger\", 1, \"dia-button\"], [\"color\", \"danger\", 1, \"back-button\", 3, \"click\"], [1, \"horarios-container\"], [\"color\", \"danger\", \"class\", \"horario-button\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"lines\", \"full\"], [4, \"ngFor\", \"ngForOf\"], [\"color\", \"danger\", 1, \"horario-button\", 3, \"click\"]],\n    template: function AdminPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\", 0)(2, \"ion-title\", 1)(3, \"a\", 2);\n        i0.ɵɵtext(4, \" Restaurante \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(5, \"ion-content\", 3);\n        i0.ɵɵtemplate(6, AdminPage_div_6_Template, 3, 1, \"div\", 4)(7, AdminPage_div_7_Template, 7, 2, \"div\", 5);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", !ctx.diaSelecionado);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.diaSelecionado);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i3.IonButton, i3.IonContent, i3.IonHeader, i3.IonItem, i3.IonLabel, i3.IonList, i3.IonTitle, i3.IonToolbar, i2.DatePipe],\n    styles: [\"#container[_ngcontent-%COMP%] {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%] {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  text-decoration: none;\\n}\\n\\nion-toolbar[_ngcontent-%COMP%] {\\n  --background: #ff0000;\\n}\\n\\n.dias-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  padding: 10px;\\n}\\n\\n.dia-item[_ngcontent-%COMP%] {\\n  margin: 10px 0;\\n  width: 100%;\\n  max-width: 400px;\\n  text-align: center;\\n}\\n\\n.dia-button[_ngcontent-%COMP%] {\\n  width: 100%;\\n  --background: #f44336;\\n  --border-radius: 20px;\\n  color: white;\\n}\\n\\n.horarios-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  flex-wrap: wrap;\\n  margin: 20px 0;\\n}\\n\\n.horario-button[_ngcontent-%COMP%] {\\n  margin: 5px;\\n  width: 100px;\\n  --background: #f44336;\\n  --border-radius: 20px;\\n}\\n\\n.back-button[_ngcontent-%COMP%] {\\n  margin: 20px 0;\\n  --background: #f44336;\\n  --border-radius: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdmlld3MvYWRtaW4vYWRtaW4ucGFnZS5zY3NzIiwid2VicGFjazovLy4vLi4vLi4vTm92YSUyMHBhc3RhL2ludGVncmFkb3JfMjAyNC9zcmMvYXBwL3ZpZXdzL2FkbWluL2FkbWluLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFBO0VBRUEsa0JBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFFBQUE7RUFDQSwyQkFBQTtBQ0FKOztBREdFO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0FDQUo7O0FER0U7RUFDRSxlQUFBO0VBQ0EsaUJBQUE7RUFFQSxjQUFBO0VBRUEsU0FBQTtBQ0ZKOztBREtFO0VBQ0UscUJBQUE7QUNGSjs7QURJRTtFQUNFLHFCQUFBO0FDREo7O0FER0U7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtFQUNBLGFBQUE7QUNBSjs7QURHRTtFQUNFLGNBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7RUFDQSxrQkFBQTtBQ0FKOztBREdFO0VBQ0UsV0FBQTtFQUNBLHFCQUFBO0VBQ0EscUJBQUE7RUFDQSxZQUFBO0FDQUo7O0FER0U7RUFDRSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxlQUFBO0VBQ0EsY0FBQTtBQ0FKOztBREdFO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxxQkFBQTtFQUNBLHFCQUFBO0FDQUo7O0FER0U7RUFDRSxjQUFBO0VBQ0EscUJBQUE7RUFDQSxxQkFBQTtBQ0FKIiwic291cmNlc0NvbnRlbnQiOlsiI2NvbnRhaW5lciB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgXHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgcmlnaHQ6IDA7XHJcbiAgICB0b3A6IDUwJTtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcclxuICB9XHJcbiAgXHJcbiAgI2NvbnRhaW5lciBzdHJvbmcge1xyXG4gICAgZm9udC1zaXplOiAyMHB4O1xyXG4gICAgbGluZS1oZWlnaHQ6IDI2cHg7XHJcbiAgfVxyXG4gIFxyXG4gICNjb250YWluZXIgcCB7XHJcbiAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICBsaW5lLWhlaWdodDogMjJweDtcclxuICBcclxuICAgIGNvbG9yOiAjOGM4YzhjO1xyXG4gIFxyXG4gICAgbWFyZ2luOiAwO1xyXG4gIH1cclxuICBcclxuICAjY29udGFpbmVyIGEge1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gIH1cclxuICBpb24tdG9vbGJhciB7XHJcbiAgICAtLWJhY2tncm91bmQ6ICNmZjAwMDA7XHJcbiAgfVxyXG4gIC5kaWFzLWNvbnRhaW5lciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gIH1cclxuICBcclxuICAuZGlhLWl0ZW0ge1xyXG4gICAgbWFyZ2luOiAxMHB4IDA7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIG1heC13aWR0aDogNDAwcHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgfVxyXG4gIFxyXG4gIC5kaWEtYnV0dG9uIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgLS1iYWNrZ3JvdW5kOiAjZjQ0MzM2O1xyXG4gICAgLS1ib3JkZXItcmFkaXVzOiAyMHB4O1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gIH1cclxuICBcclxuICAuaG9yYXJpb3MtY29udGFpbmVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGZsZXgtd3JhcDogd3JhcDtcclxuICAgIG1hcmdpbjogMjBweCAwO1xyXG4gIH1cclxuICBcclxuICAuaG9yYXJpby1idXR0b24ge1xyXG4gICAgbWFyZ2luOiA1cHg7XHJcbiAgICB3aWR0aDogMTAwcHg7XHJcbiAgICAtLWJhY2tncm91bmQ6ICNmNDQzMzY7XHJcbiAgICAtLWJvcmRlci1yYWRpdXM6IDIwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5iYWNrLWJ1dHRvbiB7XHJcbiAgICBtYXJnaW46IDIwcHggMDtcclxuICAgIC0tYmFja2dyb3VuZDogI2Y0NDMzNjtcclxuICAgIC0tYm9yZGVyLXJhZGl1czogMjBweDtcclxuICB9XHJcbiAgIiwiI2NvbnRhaW5lciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbn1cblxuI2NvbnRhaW5lciBzdHJvbmcge1xuICBmb250LXNpemU6IDIwcHg7XG4gIGxpbmUtaGVpZ2h0OiAyNnB4O1xufVxuXG4jY29udGFpbmVyIHAge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICBjb2xvcjogIzhjOGM4YztcbiAgbWFyZ2luOiAwO1xufVxuXG4jY29udGFpbmVyIGEge1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59XG5cbmlvbi10b29sYmFyIHtcbiAgLS1iYWNrZ3JvdW5kOiAjZmYwMDAwO1xufVxuXG4uZGlhcy1jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAxMHB4O1xufVxuXG4uZGlhLWl0ZW0ge1xuICBtYXJnaW46IDEwcHggMDtcbiAgd2lkdGg6IDEwMCU7XG4gIG1heC13aWR0aDogNDAwcHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLmRpYS1idXR0b24ge1xuICB3aWR0aDogMTAwJTtcbiAgLS1iYWNrZ3JvdW5kOiAjZjQ0MzM2O1xuICAtLWJvcmRlci1yYWRpdXM6IDIwcHg7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cblxuLmhvcmFyaW9zLWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBmbGV4LXdyYXA6IHdyYXA7XG4gIG1hcmdpbjogMjBweCAwO1xufVxuXG4uaG9yYXJpby1idXR0b24ge1xuICBtYXJnaW46IDVweDtcbiAgd2lkdGg6IDEwMHB4O1xuICAtLWJhY2tncm91bmQ6ICNmNDQzMzY7XG4gIC0tYm9yZGVyLXJhZGl1czogMjBweDtcbn1cblxuLmJhY2stYnV0dG9uIHtcbiAgbWFyZ2luOiAyMHB4IDA7XG4gIC0tYmFja2dyb3VuZDogI2Y0NDMzNjtcbiAgLS1ib3JkZXItcmFkaXVzOiAyMHB4O1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["of","map","catchError","i0","ɵɵelementStart","ɵɵlistener","AdminPage_div_6_ion_item_2_Template_ion_item_click_0_listener","dia_r2","ɵɵrestoreView","_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","selecionarDia","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind2","ɵɵtemplate","AdminPage_div_6_ion_item_2_Template","ɵɵproperty","diasDisponiveis","AdminPage_div_7_ion_button_4_Template_ion_button_click_0_listener","horario_r6","_r5","toggleReservas","ɵɵtextInterpolate","reserva_r7","nome","email","numeroPessoas","data","horario","tipoMesa","AdminPage_div_7_div_6_div_1_ion_item_1_Template","reservasAgrupadas","diaSelecionado","horario_r8","AdminPage_div_7_div_6_div_1_Template","isReservasVisiveis","AdminPage_div_7_Template_ion_button_click_1_listener","_r4","AdminPage_div_7_ion_button_4_Template","AdminPage_div_7_div_6_Template","horarios","AdminPage","constructor","firebaseService","horarioSelecionado","ngOnInit","getReservas","pipe","actions","a","payload","doc","id","error","console","subscribe","reservas","Array","from","Set","reserva","forEach","dia","reduce","acc","filter","_","ɵɵdirectiveInject","i1","FirebaseService","_2","selectors","decls","vars","consts","template","AdminPage_Template","rf","ctx","AdminPage_div_6_Template","AdminPage_div_7_Template"],"sources":["C:\\Users\\Aluno\\Desktop\\Nova pasta\\integrador_2024\\src\\app\\views\\admin\\admin.page.ts","C:\\Users\\Aluno\\Desktop\\Nova pasta\\integrador_2024\\src\\app\\views\\admin\\admin.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FirebaseService } from '../../firebase.service';\r\nimport { Observable, of } from 'rxjs';\r\nimport { map, catchError } from 'rxjs/operators';\r\n\r\ninterface Reserva {\r\n  id: string;\r\n  nome: string;\r\n  email: string;\r\n  numeroPessoas: number;\r\n  data: string;\r\n  horario: string;\r\n  tipoMesa: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-admin',\r\n  templateUrl: './admin.page.html',\r\n  styleUrls: ['./admin.page.scss'],\r\n})\r\nexport class AdminPage implements OnInit {\r\n\r\n  diasDisponiveis: string[] = [];\r\n  horarios = ['18:30', '19:00', '19:30', '20:00', '20:30', '21:00', '21:30'];\r\n  reservasAgrupadas: { [key: string]: { [key: string]: Reserva[] } } = {};\r\n  diaSelecionado: string | null = null;\r\n  horarioSelecionado: string | null = null;\r\n\r\n  constructor(private firebaseService: FirebaseService) {}\r\n\r\n  ngOnInit() {\r\n    this.firebaseService.getReservas().pipe(\r\n      map(actions => actions.map(a => {\r\n        const data = a.payload.doc.data() as Reserva;\r\n        const id = a.payload.doc.id;\r\n        return { ...data, id }; // Corrigido para garantir que o id não seja sobrescrito\r\n      })),\r\n      catchError(error => {\r\n        console.error('Erro ao carregar reservas: ', error);\r\n        return of([] as Reserva[]); // Retorna um array vazio em caso de erro\r\n      })\r\n    ).subscribe(reservas => {\r\n      this.reservasAgrupadas = {};\r\n      this.diasDisponiveis = Array.from(new Set(reservas.map(reserva => reserva.data)));\r\n\r\n      this.diasDisponiveis.forEach(dia => {\r\n        this.reservasAgrupadas[dia] = this.horarios.reduce((acc: { [key: string]: Reserva[] }, horario: string) => {\r\n          acc[horario] = reservas.filter(reserva => reserva.data === dia && reserva.horario === horario);\r\n          return acc;\r\n        }, {});\r\n      });\r\n    });\r\n  }\r\n\r\n  selecionarDia(dia: string) {\r\n    this.diaSelecionado = dia;\r\n    this.horarioSelecionado = null;\r\n  }\r\n\r\n  toggleReservas(horario: string) {\r\n    if (this.horarioSelecionado === horario) {\r\n      this.horarioSelecionado = null;\r\n    } else {\r\n      this.horarioSelecionado = horario;\r\n    }\r\n  }\r\n\r\n  isReservasVisiveis(horario: string): boolean {\r\n    return this.horarioSelecionado === horario;\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar color=\"red\">\r\n    <ion-title style=\"text-align: center;\">\r\n      <a href=\"/\" style=\"text-decoration: none; color: inherit;\">\r\n        Restaurante\r\n      </a>\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content fullscreen class=\"ion-padding\">\r\n  <div *ngIf=\"!diaSelecionado\" class=\"dias-container\">\r\n    <ion-list>\r\n      <ion-item *ngFor=\"let dia of diasDisponiveis\" (click)=\"selecionarDia(dia)\" class=\"dia-item\">\r\n        <ion-button fill=\"solid\" expand=\"block\" color=\"danger\" class=\"dia-button\">\r\n          {{ dia | date: 'dd/MM/yyyy' }}\r\n        </ion-button>\r\n      </ion-item>\r\n    </ion-list>\r\n  </div>\r\n  \r\n  <div *ngIf=\"diaSelecionado\">\r\n    <ion-button (click)=\"diaSelecionado = null\" color=\"danger\" class=\"back-button\">Voltar</ion-button>\r\n    <div class=\"horarios-container\">\r\n      <ion-button \r\n        *ngFor=\"let horario of horarios\" \r\n        (click)=\"toggleReservas(horario)\" \r\n        color=\"danger\"\r\n        class=\"horario-button\">\r\n        {{ horario }}\r\n      </ion-button>\r\n    </div>\r\n    <ion-list lines=\"full\">\r\n      <div *ngFor=\"let horario of horarios\">\r\n        <div *ngIf=\"isReservasVisiveis(horario)\">\r\n          <ion-item *ngFor=\"let reserva of reservasAgrupadas[diaSelecionado][horario]\">\r\n            <ion-label>\r\n              <h2>{{ reserva.nome }}</h2>\r\n              <p>Email: {{ reserva.email }}</p>\r\n              <p>Número de Pessoas: {{ reserva.numeroPessoas }}</p>\r\n              <p>Data: {{ reserva.data | date: 'dd/MM/yyyy' }}</p>\r\n              <p>Horário: {{ reserva.horario }}</p>\r\n              <p>Tipo de Mesa: {{ reserva.tipoMesa }}</p>\r\n            </ion-label>\r\n          </ion-item>\r\n        </div>\r\n      </div>\r\n    </ion-list>\r\n  </div>\r\n</ion-content>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}